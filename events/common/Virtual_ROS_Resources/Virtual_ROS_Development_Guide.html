<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Development Guide for the Development Container</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="color-scheme" content="light dark">
  <link rel="stylesheet" href="../../../assets/style.css">
</head>
<body>
  <header class="site-header">
    <div class="header-inner">
      <div class="header-left">
        
      </div>
      <div class="header-middle">
        <h1>Quanser Student Competitions</h1>
      </div>
      <div class="header-right">
        <img src="../../../assets/logos/full colour_dark background_tagline.png" alt="Quanser Student Competitions logo" class="site-logo">
      </div>
    </div>
    <div class="header-banner">
      <img src="../../../assets/banners/quanser_banner.jpg" alt="Competition banner" class="header-banner-img">
    </div>
  </header>

  <main class="content">
    <h1 id="development-guide-for-the-development-container">Development Guide for the Development Container <!-- omit in toc --></h1>
<p>This guide will provide instructions and tips for developing your self-driving algorithm in the Isaac-ROS Development Container.</p>
<p>The topics are listed below and will be updated with new information periodically:</p>
<ul>
<li><a href="#structure-of-the-development-environment">Structure of the development environment</a></li>
<li><a href="#quanser-virtual-container">Quanser Virtual Container</a></li>
<li><a href="#development-container">Development Container</a></li>
<li><a href="#how-to-create-files-that-persist-in-the-container">How to create files that persist in the container</a></li>
<li><a href="#how-can-i-change-the-led-strip-in-ros">How can I Change the LED Strip in ROS</a></li>
<li><a href="#python-development">Python Development</a></li>
<li><a href="#how-to-add-packages-via-apt-that-persist">How to add packages via <code>apt</code> that persist</a></li>
<li><a href="#how-to-add-python-packages-via-pip3-that-persist">How to add Python packages via <code>pip3</code> that persist</a></li>
<li><a href="#how-to-stop-the-rt-model">How to stop the RT Model</a></li>
</ul>
<h2 id="structure-of-the-development-environment">Structure of the development environment</h2>
<p>There are 3 components to the development environment that has been constructed for this competition:</p>
<ol>
<li><code>Quanser Virtual Environment Container</code>: A Docker Container intended for running Python scripts that set up the QLabs world.</li>
<li><code>Development Container</code>: A Docker Container modified from the <code>isaac_ros</code> Nvidia container that contains Quanser's QCar 2 ROS2 nodes.</li>
<li><code>Quanser Interactive Labs</code>: An application that gets installed natively in Ubuntu 24.04. This application provides the simulation environment for the QCar 2 and the Quanser Virtual Environment Container connects to this application.</li>
</ol>
<p><img alt="QLabsDevelopmentVennDiagram" src="/events/common/Pictures/DevelopmentVennDiagram.png"/></p>
<p>To set these 3 components up, you will need to follow the <a href="/events/common/Virtual_ROS_Resources/Virtual_ROS_Software_Setup.html">ACC Software Setup</a> document.</p>
<h3 id="quanser-virtual-container">Quanser Virtual Container</h3>
<p>This Docker Container comes preinstalled with a Python interpreter that can run the Base Scenarios. The Base Scenarios utilize the <a href="https://qlabs.quanserdocs.com/en/latest/Objects/index.html"><code>qvl</code> library</a> that allows you to spawn "actors" into the QLabs environment. The  allows you to interface with QLabs to spawn in different actors. Using <code>qvl</code> you can develop your own custom scenarios to test your algorithm.</p>
<p>Inside the Docker Container are 2 RT Models (Real-Time Model). When you run any of the Base Scenarios, an RT Model is run. The RT Model is what allows you to interface with the virtual QCar 2. It sends and receives information from a digital "hardware board" in QLabs.</p>
<pre><code class="language-bash">/virtual_plants/rt_models/QCar2
                            L QCar2_Workspace_studio.rt-linux_x86_64
                            L QCar2_Workspace.rt-linux_x86_64
</code></pre>
<p>The studio RT Model is used if you spawn the QCar 2 at 1/10th scale, as done in the Setup_Competition_Map.py script. The non-studio version is used if you spawn the Virtual QCar 2 in at full scale, as done in the Setup_Base_Scenario_stop_ACC_Competition_2025.py script.</p>
<h3 id="development-container">Development Container</h3>
<p>This Docker Container is modified from the Isaac-ROS Nvidia container. It comes preinstalled with ROS2 Humble and contains the nodes that are used to interface with the Virtual QCar2.</p>
<p>The ROS2 Humble nodes interface with the QCar2 via the <a href="https://docs.quanser.com/quarc/documentation/hardware_functions_alphabetical_list_c.html">C API</a>.</p>
<h2 id="how-to-create-files-that-persist-in-the-container">How to create files that persist in the container</h2>
<p>When a docker container is exited, all the changes done inside the container will be lost. Starting the Development container (Isaac-ROS) using the command <code>./scripts/run_dev.sh  /home/$USER/Documents/ACC_Development/Development</code> links the <code>/home/$USER/Documents/ACC_Development/Development</code> directory to the container and all files under this directory will automatically synced with the host. Therefore, your development files will persist even after the container is exited if you place your files in that directory. We recommend you create a <code>&lt;ros_packages_go_here&gt;</code> directory as shown below and develop your ROS packages in that directory:</p>
<pre><code class="language-bash">/home/$USER/Documents/ACC_Development/Development/
                                              L ros2/
                                                  L src/
                                                      L qcar2_interfaces/
                                                      L qcar2_nodes/
                                                      L &lt;ros_packages_go_here&gt;/
</code></pre>
<p>If you do not plan on using ROS, there is a <code>python_dev</code> folder for Python development specifically. This contains a few examples. Otherwise you can create a <code>&lt;non_ros_development&gt;</code> directory shown below outside of the <code>ros2</code> directory:</p>
<pre><code class="language-bash">/home/$USER/Documents/ACC_Development/Development/
                                              L ros2/
                                              L python_dev
                                              L &lt;non_ros_development&gt;/
</code></pre>
<p>Once you place files in the folders <code>python_dev</code> or <code>&lt;non_ros_development&gt;</code>, they will appear in the following directory when you start the Development Docker Container:</p>
<pre><code class="language-bash">admin@username:/workspaces/isaac_ros-dev/&lt;dev_files&gt;
</code></pre>
<h2 id="how-can-i-change-the-led-strip-in-ros">How can I Change the LED Strip in ROS</h2>
<p>Here is the command for setting the LED Strip for the QCar 2 in ROS:</p>
<pre><code class="language-bash">ros2 param set qcar2_hardware led_color_id &lt;value&gt;
</code></pre>
<p>They are formatted as <code>0: red , 1: green, 2: blue, 3: yellow , 4: cyan , 5: magenta</code>.</p>
<h2 id="python-development">Python Development</h2>
<p>It is expected that all Python development is done in the <code>python_dev</code> folder under the following directory in the Development Container:</p>
<pre><code class="language-bash">admin@username:/workspaces/isaac_ros-dev/python_dev
</code></pre>
<p>Please view the <a href="XXXXXXXXXXXXXXXXXX">Utilizing hal and pal</a> guide for more details on utilizing the Quanser Python libraries.</p>
<h2 id="how-to-add-packages-via-apt-that-persist">How to add packages via <code>apt</code> that persist</h2>
<p>Any packages that get installed via <code>apt</code> in the command line of the Development Container do not persist once the container is closed. When you are installing packages in the terminal, make sure to edit the Docker file called <strong><code>Dockerfile.quanser</code></strong>. This Docker file is used to configure the Development container and can be found in the following folder:</p>
<pre><code class="language-bash">cd /home/$USER/Documents/ACC_Development/docker
</code></pre>
<p>At the bottom of the <code>Dockerfile.quanser</code> add your Debian packages as shown below:</p>
<pre><code class="language-bash"># Install Debian packages
RUN apt-get update &amp;&amp; apt-get install -y \
    python3-transforms3d \
    python3-pyqtgraph \
    &amp;&amp; rm -rf /var/lib/apt/lists/*
</code></pre>
<p>This example will install pytransform3d and pyqtgraph everytime the container is started. <strong>As you develop in the Development Container</strong>, make sure you record any packages installed via <code>apt</code> in the Docker file mentioned above.</p>
<p><strong>IMPORTANT:</strong> If you ever download the ACC_Resources.zip file and run the <code>setup_linux.py</code> file again, this will create a new ACC_Development folder and record a backup of your previous one. Make sure to copy any changes made to <code>Dockerfile.quanser</code> over to the new ACC_Development folder.</p>
<h2 id="how-to-add-python-packages-via-pip3-that-persist">How to add Python packages via <code>pip3</code> that persist</h2>
<p><strong>NOTE</strong>: We recommend you use the Debian packages if they are available.</p>
<p>Any packages that get installed via <code>pip3</code> in the command line of the Development Container do not persist once the container is closed. When you are installing packages in the terminal, make sure to edit the Docker file called <strong><code>Dockerfile.quanser</code></strong>. This Docker file is used to configure the Development container and can be found in the following folder:</p>
<pre><code class="language-bash">cd /home/$USER/Documents/ACC_Development/docker
</code></pre>
<p>At the bottom of the <code>Dockerfile.quanser</code> add your Python packages as shown below:</p>
<pre><code class="language-bash"># Install Python Packages if necessary
RUN pip3 install -U \
    pytransform3d \
    pyqtgraph
</code></pre>
<p>This example will install pytransform3d and pyqtgraph everytime the container is started. <strong>As you develop in the Development Container</strong>, make sure you record any packages installed via <code>pip3</code> in the Docker file mentioned above.</p>
<p><strong>IMPORTANT:</strong> If you ever download the ACC_Resources.zip file and run the <code>setup_linux.py</code> file again, this will create a new ACC_Development folder and record a backup of your previous one. Make sure to copy any changes made to <code>Dockerfile.quanser</code> over to the new ACC_Development folder.</p>
<h2 id="how-to-stop-the-rt-model">How to stop the RT Model</h2>
<p>When the Setup_Competition_Map.py file gets run (or any other base scenario file provided), a real-time application (RT Model) is deployed that communicates with the virtual QCar 2. This RT Model is what the QCar2 ROS nodes communicate with. It is important to gracefully stop this model once you are no longer using your current workspace. Run the following commands to stop the RT Model:</p>
<ol>
<li>
<p>Using the Quanser Virtual Environment Docker container, navigate to the following directory:</p>
<p><code>bash
cd /home/qcar2_scripts/python</code></p>
</li>
<li>
<p>To stop the RT Model run the following command:</p>
<p><code>bash
python3 qcar2_stop.py</code></p>
</li>
</ol>
  </main>

  <footer class="site-footer">
    <p>&copy; 2025 Quanser Student Competitions</p>
  </footer>
</body>
</html>
